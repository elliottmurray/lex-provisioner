#!/bin/sh

defaultBucket='elliott-provisioner'

BUILD_NUMBER="0.0.$1"

BUCKET_NAME=${2:-$defaultBucket}

echo "Packaging..."

sam package  -t template.yaml --output-template-file packaged.yaml --s3-bucket $BUCKET_NAME > /dev/null 2>&1

echo "Publishing..."
sam publish -t packaged.yaml --semantic-version $BUILD_NUMBER

